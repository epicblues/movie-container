<!DOCTYPE html>
<html>
    <head>
        <meta charset ="utf-8">
    </head>

    <title>movie streaming html</title>

    <header>
        Movie Upload And Streaming
    </header>

    <body>
    <ul id="movList">
        
    </ul>

    <article class="viewer">

    </article>
    
    <script>
        
        function showMovie (title) {
            console.log(title)
            document.querySelector('.viewer').innerHTML = `
                    <video width='320' height='240' controls>
                        <source src='./videos/${title}' type='video/mp4'>
                        blank
                    </video>`
        }

        fetch('./list.json')
        .then((res,err) => {
            return res.json();
        })
        .then((json) => {
            console.log(json);
            let list = '';
            for(let movie of json) {
                console.log(movie.title, typeof movie.title)
                list += `<li id=${movie.id}><a onclick="
                    event.preventDefault();
                    showMovie('${movie.title}');
                    "
                    href="./videos/${movie.title}">movie${movie.id}</a></li>`
            }
            document.getElementById('movList').innerHTML = list
            
        })
        .catch((err) => {
            console.log(err)
        })

        
        
    </script>

    </body>
</html>